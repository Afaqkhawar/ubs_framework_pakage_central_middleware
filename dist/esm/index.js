var Qe=Object.create;var M=Object.defineProperty,Ze=Object.defineProperties,es=Object.getOwnPropertyDescriptor,ss=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertyNames,H=Object.getOwnPropertySymbols,os=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable;var q=(s,r,n)=>r in s?M(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n,a=(s,r)=>{for(var n in r||(r={}))$.call(r,n)&&q(s,n,r[n]);if(H)for(var n of H(r))ts.call(r,n)&&q(s,n,r[n]);return s},R=(s,r)=>Ze(s,ss(r));var ns=(s=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(s,{get:(r,n)=>(typeof require!="undefined"?require:r)[n]}):s)(function(s){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var _s=(s,r)=>()=>(r||s((r={exports:{}}).exports,r),r.exports);var Es=(s,r,n,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of rs(r))!$.call(s,i)&&i!==n&&M(s,i,{get:()=>r[i],enumerable:!(e=es(r,i))||e.enumerable});return s};var is=(s,r,n)=>(n=s!=null?Qe(os(s)):{},Es(r||!s||!s.__esModule?M(n,"default",{value:s,enumerable:!0}):n,s));var Xe=_s((Hs,We)=>{var D=ns("crypto-js"),ke=(s,r=32)=>s.length>r?s.slice(0,r):s.length<r?s.padEnd(r,"0"):s,Rs=(s,r)=>{let n=ke(r),e=D.enc.Utf8.parse(n),i=JSON.stringify(s);return D.AES.encrypt(i,e,{mode:D.mode.ECB,padding:D.pad.Pkcs7}).toString()},cs=(s,r)=>{let n=ke(r),e=D.enc.Utf8.parse(n),c=D.AES.decrypt(s,e,{mode:D.mode.ECB,padding:D.pad.Pkcs7}).toString(D.enc.Utf8);return JSON.parse(c)};We.exports={encryptObject:Rs,decryptObject:cs}});import{applyMiddleware as Os,createStore as fs,compose as ys}from"redux";import{persistStore as us,persistReducer as gs}from"redux-persist";import Ns from"redux-persist/lib/storage/index";import Ls from"redux-saga";import{combineReducers as as}from"redux";var J="REDUX_UPDATE_CURRENT_USER_ROLE",z="REDUX_LOGOUT_CURRENT_USER",Q="REDUX_UPDATE_CURRENT_USER",Z="REDUX_UPDATE_LOADING_STATE",ee="REDUX_UPDATE_USER_DATA",se="REDUX_API_DOCUMENTATION";var re={accesstoken:null,currentUser:null,currentUserDesignationsRoles:[],currentUserPermissions:[],userPermissions:[],userDepartments:[],userDesignation:[],userDevices:[],allUserPermissions:{},userSelectedRole:{},apiDocumentationData:[],userRoles:[],isLoading:!1},ls=(s=re,r)=>{var n,e,i,c;switch(r==null?void 0:r.type){case Q:return R(a({},s),{currentUser:r.payload.otpVerif.user,accesstoken:r.payload.otpVerif.access_token,currentUserDesignationsRoles:r.payload.otpVerif.user_roles_designations_departments,userSelectedRole:((e=(n=r.payload.otpVerif)==null?void 0:n.user_roles_designations_departments)==null?void 0:e.length)>0?r.payload.otpVerif.user_roles_designations_departments[0]:{},userPermissions:r.payload.otpVerif.collective_user_permissions,currentUserPermissions:((i=r.payload.otpVerif.user_roles_designations_departments)==null?void 0:i.length)>0?r.payload.otpVerif.user_permissions[r.payload.otpVerif.user_roles_designations_departments[0].user_role_designation_department_id]:[],allUserPermissions:r.payload.otpVerif.user_permissions,userDepartments:r.payload.otpVerif.user_departments,userDesignation:r.payload.otpVerif.user_designations,userRoles:r.payload.otpVerif.user_roles,userDevices:r.payload.otpVerif.user_devices});case ee:let d=a(a({},s.currentUser),r.requestParams);return R(a({},s),{currentUser:d});case z:return re;case J:return R(a({},s),{userSelectedRole:r.payload,currentUserPermissions:s.allUserPermissions[(c=r.payload)==null?void 0:c.user_role_designation_department_id]});case Z:return R(a({},s),{isLoading:r.payload});case se:return R(a({},s),{isLoading:!1,apiDocumentationData:r.payload.payload});default:return s}},oe=ls;var ps=as({main:oe}),te=ps;import{all as ms}from"redux-saga/effects";var ne="GET_OTP",_e="VERIFY_OTP",Ee="UPDATE_CURRENT_USER_ROLE",ie="UPDATE_LOADING_STATE",le="LOGOUT_CURRENT_USER",ae="GET_ALL_USERS",pe="GET_ALL_ROLES",Re="DELETE_USER",ce="ADD_USER",Ae="DELETE_ROLE",De="ADD_ROLE",Te="GET_GROUPS",Se="GET_ALL_PERMISSIONS",de="GET_ALL_PERMISSIONS_GROUPS",Ie="UPDATE_USER_DATA",Ue="GET_ALL_USER_ROLE_PERMISSIONS_GROUPS",me="GET_ADMIN_DASHBOARD_DATA",Pe="GET_USER_DEVICES",Oe="ADD_PERMISSION",fe="PERMISSION_UPDATE",ye="GET_PERMISSION_BY_ID",C="admin_user_view",ue="admin_designation_view",ge="admin_departments_view",Ne="UPDATE_PERMISSION_BY_ID",Le="admin_rolesdesignationsdepartment_view",Ge="admin_urdd_view",Me="admin_permission_groups_view",Ce="admin_pgp_view",xe="admin_user_role_designation_permissions_view",Ve="GET_INDIVIDUAL_LEADERBOARD_DATA",ve="GET_GROUP_LEADERBOARD_DATA",he="GET_USER_DEVICES_OTP",be="ADD_DEVICE",we="ADD_DEVICE_OTP",Fe="FETCH_CLASS_ACTIVITIES";var Be="API_DOCUMENTATION";import{takeEvery as t}from"redux-saga/effects";var T=is(Xe());import{select as Ke,put as Ds}from"redux-saga/effects";var As={base_url:"http://localhost:3000/api",step1:"&step=1",step2:"&step=2",version:"?version=1.0",all:"/all",list:"/list",update:"/update",add:"/add",delete:"/delete",dropDown:"/dropdown",groups:"/groups",errors:"/errors",get:"/get",email:"/email",log:"/log",api_documentation:"/documentation",get_otp:"/login?version=1.0&step=1",verify_otp:"/login?version=1.0&step=2",users_role_info:"/users_role_info",login:"/login",info:"/info",crud:"/crud",users:"/users",groups:"/groups",get_admin_dashboard_data:"/admin/dashboard",user_devices:"devices",attachments:"/attachments",chatting_group_members:"/chatting_group_members",chatting_groups:"/chatting_groups",departments:"/departments",designations:"/designations",messages:"/messages",notifications:"/notifications",permission_groups:"/permission_groups",permission_groups_permissions:"/permission_groups_permissions",permissions:"/permissions",platform_versions:"/platform_versions",platforms:"/platforms",roles:"/roles",roles_designations_department:"/roles_designations_department",task_flow_steps:"/task_flow_steps",task_flows:"/task_flows",task_history:"/task_history",tasks:"/tasks",templates:"/templates",user_device_notifications:"/user_device_notifications",luser_devices:"/user_devices",user_role_designation_permissions:"/user_role_designation_permissions",user_roles_designations_department:"/user_roles_designations_department"},Ye=As;function*Ts(s,r,n){var i,c,d,O,f,y,u,g,N,I,h,b,w,F,B,k,W,X;console.log("********* SAGHELPER ACTION: ********",s,`
*******   [queryParameter: ${r} ]
******** [queryParameterId:${n} ]********
`);let e=(s==null?void 0:s.payload)||s;try{console.log("ENV CHECK",process.env);let S=yield Ke(p=>p.main);if(!((i=process.env)!=null&&i.REACT_APP_PLATFORM_KEY)||!((c=process.env)!=null&&c.REACT_APP_SECRET_KEY)){console.log("Encryption Failed"),e==null||e.onFailure({status:401,frameworkStatusCode:"E44",message:"Encryption Failed [ Env not found ]."});return}let Y=yield Ke(p=>p),{userSelectedRole:l}=Y.main;console.log("currentUser",Y,l);let K=e==null?void 0:e.apiUrl,Je=(e==null?void 0:e.useBaseURL)!=!1,L=(e==null?void 0:e.isFile)==!0;console.log("isFile: ",L,e==null?void 0:e.isFile);let m=(e==null?void 0:e.isEncrypted)!=!1;console.log("isEncrypted: ",m);let U=Je?((d=Ye)==null?void 0:d.base_url)+K:K;r&&r!==""&&(U+=r),n&&n!==""&&(U+="&id="+n);let ze=e==null?void 0:e.metaData,P=e==null?void 0:e.formData,j=(S==null?void 0:S.accesstoken)||null,E={headers:R(a({},P?{}:{"Content-Type":"application/json"}),{accesstoken:j}),method:(e==null?void 0:e.requestType)||"GET"};if(ze&&j===null&&console.warn("metaData is true but access token is not present in header"),e!=null&&e.body&&(e==null?void 0:e.requestType)!=="GET")if((e==null?void 0:e.requestType)==="DELETE")if(m){let _={reqData:(0,T.encryptObject)({Id:`${((O=e==null?void 0:e.body)==null?void 0:O.Id)||null}`,actionPerformerURDD:l==null?void 0:l.user_role_designation_department_id},(f=process.env)==null?void 0:f.REACT_APP_PLATFORM_KEY),encryptionDetails:{PlatformName:(y=process.env)==null?void 0:y.REACT_APP_PLATFORM_NAME,PlatformVersion:(u=process.env)==null?void 0:u.REACT_APP_PLATFORM_VERSION}};E.headers.encryptedrequest=(0,T.encryptObject)(_,(g=process.env)==null?void 0:g.REACT_APP_SECRET_KEY)}else E.headers.reqData={Id:`${((N=s==null?void 0:s.body)==null?void 0:N.Id)||null}`,actionPerformerURDD:l==null?void 0:l.user_role_designation_department_id};else if(m){E.body={encryptedRequest:{}};let p=P?e==null?void 0:e.body:R(a({},(e==null?void 0:e.body)||null),{actionPerformerURDD:l==null?void 0:l.user_role_designation_department_id});console.log("***************** Final Updated Body ***************** ",p);let A={reqData:(0,T.encryptObject)(p,(I=process.env)==null?void 0:I.REACT_APP_PLATFORM_KEY),encryptionDetails:{PlatformName:(h=process.env)==null?void 0:h.REACT_APP_PLATFORM_NAME,PlatformVersion:(b=process.env)==null?void 0:b.REACT_APP_PLATFORM_VERSION}};E.body.encryptedRequest=(0,T.encryptObject)(A,(w=process.env)==null?void 0:w.REACT_APP_SECRET_KEY),E.body=JSON.stringify(E==null?void 0:E.body)}else P?E.body=e==null?void 0:e.body:E.body=JSON.stringify(R(a({},(e==null?void 0:e.body)||{}),{actionPerformerURDD:l==null?void 0:l.user_role_designation_department_id}));else if(m){E.headers=R(a({},E==null?void 0:E.headers),{encryptedRequest:{}});let p=P?e==null?void 0:e.body:R(a({},(e==null?void 0:e.body)||{}),{actionPerformerURDD:l==null?void 0:l.user_role_designation_department_id});console.log("***************** Final Updated Body ***************** ",p);let A={reqData:(0,T.encryptObject)(p,(F=process.env)==null?void 0:F.REACT_APP_PLATFORM_KEY),encryptionDetails:{PlatformName:(B=process.env)==null?void 0:B.REACT_APP_PLATFORM_NAME,PlatformVersion:(k=process.env)==null?void 0:k.REACT_APP_PLATFORM_VERSION}};E.headers.encryptedRequest=(0,T.encryptObject)(A,(W=process.env)==null?void 0:W.REACT_APP_SECRET_KEY)}else E.headers=P?E==null?void 0:E.headers:R(a({},E==null?void 0:E.headers),{reqData:{actionPerformerURDD:l==null?void 0:l.user_role_designation_department_id}});if(console.log("Complete URL",U),U!==""){console.log(`***************** API_Request_After_Encryption *************
`,E);let p=yield fetch(U,E).catch(A=>{console.log(`Network error: ${A==null?void 0:A.message}`)}),_=L?p:yield p.json();if(console.log("responseData::::",_),_.status!==200){let A=Ss(_.status,_.scc);e!=null&&e.onFailure&&typeof(e==null?void 0:e.onFailure)=="function"&&(e==null||e.onFailure({status:_==null?void 0:_.status,frameworkStatusCode:_==null?void 0:_.scc,message:A||(_==null?void 0:_.message)}));return}else _!=null&&_.payload&&m?_=(0,T.decryptObject)(_==null?void 0:_.payload,(X=process.env)==null?void 0:X.REACT_APP_PLATFORM_KEY):_=L?p:_==null?void 0:_.payload,e!=null&&e.reduxActionType&&(yield Ds({type:e==null?void 0:e.reduxActionType,payload:_,requestParams:e==null?void 0:e.body})),typeof(e==null?void 0:e.onSuccess)=="function"&&(console.log(`***************** API_Response *************
 `,U,_,L),e==null||e.onSuccess(_))}}catch(S){console.error(`******** Error in fetchData ******* : ${S==null?void 0:S.message}`),e!=null&&e.onFailure&&typeof(e==null?void 0:e.onFailure)=="function"&&(e==null||e.onFailure({message:S.message}))}}var Ss=(s,r)=>({E10:"Parameter name does not exist.",E11:"Parameter validation failure.",E12:"Parameter missing in source.",E13:"Required parameter missing.",E14:"No request body found.",E20:"Invalid or missing query nature.",E21:"Invalid or missing query payload.",E22:"Callback function error.",E23:"Callback function missing.",E24:"Payload function error.",E25:"Payload function missing.",E30:"Invalid or missing request method.",E31:"Invalid or missing permission.",E32:"Invalid page size value.",E40:"Invalid or expired token.",E41:"Permission validation failure.",E42:"OTP verification failure.",E43:"Object resolver failure.",E44:"Database connection failed.",E50:"API version does not exist.",E51:"API object does not exist.",E52:"Mismatch request method."})[r]||`Unexpected error (Code: ${r})`,o=Ts;import{put as ds}from"redux-saga/effects";function*Is(s){yield ds({type:s.payload.reduxActionType,payload:s.payload.data})}var G=Is;function*Us(){yield t(ne,o),yield t(_e,o),yield t(ae,o),yield t(pe,o),yield t(Re,o),yield t(ce,o),yield t(Ae,o),yield t(De,o),yield t(Te,o),yield t(Se,o),yield t(de,o),yield t(Ie,o),yield t(Ue,o),yield t(me,o),yield t(Pe,o),yield t(Oe,o),yield t(fe,o),yield t(ye,o),yield t(Ne,o),yield t(C,o),yield t(ue,o),yield t(ge,o),yield t(Le,o),yield t(Ge,o),yield t(Me,o),yield t(Ce,o),yield t(xe,o),yield t(C,o),yield t("admin_user_update",o),yield t("admin_urdd_list",o),yield t("admin_urdd_add",o),yield t(Ee,G),yield t(ie,G),yield t(le,G),yield t(Be,o),yield t(Ve,o),yield t(ve,o),yield t(he,o),yield t(be,o),yield t(we,o),yield t(Fe,o)}var je=Us;function*Ps(){yield ms([je()])}var He=Ps;var Gs={key:"root",storage:Ns},Ms=gs(Gs,te),qe=Ls(),Cs=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ys,x=fs(Ms,Cs(Os(qe)));qe.run(He);var Tr=us(x);import{runSaga as xs}from"redux-saga";var Vs=async(s,r=null,n=null,e=null)=>{if(!(s!=null&&s.apiUrl)){console.error("Error","No API URL provided");return}try{return await xs({dispatch:()=>{},getState:()=>x.getState()},o,s,r,n).toPromise()}catch(i){console.error("Error in Server Response:",i)}finally{e&&e(!1)}};function $e({apiActionType:s="",permission:r=!1,requestType:n="GET",apiUrl:e,isEncrypted:i=!0,metaData:c=!0,useBaseURL:d=!0,formData:O=!1,body:f={},reduxActionType:y="",isFile:u=!1,onSuccess:g=I=>console.log("Success:",I),onFailure:N=I=>console.log("Error:",I.message)}){return{apiActionType:s,permission:r,requestType:n,apiUrl:e,metaData:c,body:f,formData:O,useBaseURL:d,isEncrypted:i,reduxActionType:y,isFile:u,onSuccess:g,onFailure:N}}import{toast as V}from"react-toastify";import"react-toastify/dist/ReactToastify.css";var v={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},vs=s=>{V.success(s,v)},hs=s=>{V.error(s,v)},bs=s=>{V.info(s,v)};export{Vs as getServerResponse,$e as serverCommunicationHelper,hs as showErrorToast,bs as showInfoToast,vs as showSuccessToast};
//# sourceMappingURL=index.js.map